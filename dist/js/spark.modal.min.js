(function(a){a.fn.sparkmodal=function(m){var j=this;var f=a.extend({trigger:this.data("open-trigger"),close:this.data("close-trigger"),escapeToClose:true,clickToClose:true},m);var d=a(f.trigger);var l=a(f.close);var e=a("#blackout");if(!e.length){e=a("<div>",{id:"blackout"});a("body").append(e)}d.on("click",function(n){n.preventDefault();if(!j.hasClass("static")){g(e);h(j)}});l.on("click",function(n){n.preventDefault();if(!j.hasClass("static")){g(e);h(j)}});if(f.escapeToClose){a(window).keyup(function(n){if(j.hasClass("show")&&n.which==27){n.preventDefault();g(e);h(j)}})}if(f.clickToClose){e.on("click",function(n){if(j.hasClass("show")){n.preventDefault();g(e);h(j)}})}function h(n){if(n.hasClass("show")){b(n)}else{i(n)}}function g(n){if(n.hasClass("show")){k(n)}else{c(n)}}function c(n){n.css({display:"block"});setTimeout(function(){n.addClass("show")},100)}function k(n){n.removeClass("show");setTimeout(function(){n.css("display","")},500)}function i(n){n.css({display:"inherit"});setTimeout(function(){n.addClass("show")},100)}function b(n){n.removeClass("show");setTimeout(function(){n.css("display","")},500)}return{open:function(){i(j);c(e)},close:function(){b(j);k(e)},toggle:function(){h(j);g(e)}}}}(jQuery));